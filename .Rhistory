if (!require(pacman)) install.packages("pacman")
pacman::p_load(here, # reproducibility
# wrangling
tidyverse,
tools,
jtools,
# data visualization
hrbrthemes,
viridis,
ggstance,
patchwork,
gridExtra,
ggrepel)
pacman::p_load(here, # reproducibility
# wrangling
tidyverse,
tools,
jtools,
# data visualization
hrbrthemes,
viridis,
ggstance,
patchwork,
gridExtra,
ggrepel)
source(here("functions", "utils.R"))
# Get the file names
file_names <- list.files(here("data"))[str_detect(list.files(here("data")), "2021_")]
# Import the csv files; Remove the first two rows
## Immigrants
immigrants_df <- read_csv_custom(1)
## Omnibus
omnibus_df <- read_csv_custom(2)
## Name perceptions
perceptions_df <- read_csv_custom(3)
## Name dataset
names_df <- read.csv(here("data", "names.csv"))
omnibus_df <-
clean_omnibus_df(omnibus_df)
immigrants_df <- clean_immigrant_df(immigrants_df)
immigrants_all <- df2comb(immigrants_df, dataset = "immigrants")
omnibus_all <- df2comb(omnibus_df, dataset = "omnibus")
perceptions_all <- df2comb(perceptions_df, dataset = "perceptions")
length(unique(immigrants_all$name))
length(unique(omnibus_all$name))
length(unique(perceptions_all$name))
length(unique(immigrants_df$ResponseId))
2281*15
# Check name perceptions
# Want to create five groups of names: Asian, Asian (with White first names), Black, Hispanic, and White
### Clear terminal
cat("\014")
### Clear space
rm(list = ls())
### Load library
library(tools)
library(tidyr)
library(forcats)
library(hrbrthemes)
library(ggplot2)
### Set WD
setwd("~/Dropbox/asian-discrimination/perspective-taking/data/")
### Import data - Prolific survey of 500 respondents
df <- read.csv("name-perceptions_February 4, 2021_16.20.csv")
df <- df[-c(1:2), ]
head(df)
df$ResponseId
length(unique(df$ResponseId))
if (!require(pacman)) install.packages("pacman")
pacman::p_load(here, # reproducibility
# wrangling
tidyverse,
tools,
jtools,
# data visualization
hrbrthemes,
viridis,
ggstance,
patchwork,
gridExtra,
ggrepel)
source(here("functions", "utils.R"))
# Get the file names
file_names <- list.files(here("data"))[str_detect(list.files(here("data")), "2021_")]
# Import the csv files; Remove the first two rows
## Immigrants
immigrants_df <- read_csv_custom(1)
## Omnibus
omnibus_df <- read_csv_custom(2)
## Name perceptions
perceptions_df <- read_csv_custom(3)
## Name dataset
names_df <- read.csv(here("data", "names.csv"))
omnibus_df <-
clean_omnibus_df(omnibus_df)
immigrants_df <- clean_immigrant_df(immigrants_df)
immigrants_all <- df2comb(immigrants_df, dataset = "immigrants")
omnibus_all <- df2comb(omnibus_df, dataset = "omnibus")
---
title: "Three datasets"
author: "Jae Yeon Kim"
date: "`r Sys.Date()`"
---
# Load libs
```{r}
if (!require(pacman)) install.packages("pacman")
pacman::p_load(here, # reproducibility
# wrangling
tidyverse,
tools,
jtools,
# data visualization
hrbrthemes,
viridis,
ggstance,
patchwork,
gridExtra,
ggrepel)
source(here("functions", "utils.R"))
```
# Import data
```{r}
# Get the file names
file_names <- list.files(here("data"))[str_detect(list.files(here("data")), "2021_")]
```
```{r}
# Import the csv files; Remove the first two rows
## Immigrants
immigrants_df <- read_csv_custom(1)
## Omnibus
omnibus_df <- read_csv_custom(2)
## Name perceptions
perceptions_df <- read_csv_custom(3)
## Name dataset
names_df <- read.csv(here("data", "names.csv"))
```
# Preprocess three datasets and merge them with the names dataset
## Step 1
Using common variables: age, gender, income, education, race, citizenship
Not using partisanship as it's not measured in `immigrants_df` (instead, vote choice for the 2020 US presidential election was measured.) The same applies to citizenship variable. immigrants_df$Q111 (second generation or not)
```{r}
omnibus_df <-
clean_omnibus_df(omnibus_df)
immigrants_df <- clean_immigrant_df(immigrants_df)
```
## Step 2
immigrants_all <- df2comb(immigrants_df, dataset = "immigrants")
immigrants_df$ResponseId
omnibus_df$ResponseId
perceptions_df$ResponseId
---
title: "Three datasets"
author: "Jae Yeon Kim"
date: "`r Sys.Date()`"
---
# Load libs
```{r}
if (!require(pacman)) install.packages("pacman")
pacman::p_load(here, # reproducibility
# wrangling
tidyverse,
tools,
jtools,
# data visualization
hrbrthemes,
viridis,
ggstance,
patchwork,
gridExtra,
ggrepel)
source(here("functions", "utils.R"))
```
# Import data
```{r}
# Get the file names
file_names <- list.files(here("data"))[str_detect(list.files(here("data")), "2021_")]
```
```{r}
# Import the csv files; Remove the first two rows
## Immigrants
immigrants_df <- read_csv_custom(1)
## Omnibus
omnibus_df <- read_csv_custom(2)
## Name perceptions
perceptions_df <- read_csv_custom(3)
## Name dataset
names_df <- read.csv(here("data", "names.csv"))
```
# Preprocess three datasets and merge them with the names dataset
## Step 1
Using common variables: age, gender, income, education, race, citizenship
Not using partisanship as it's not measured in `immigrants_df` (instead, vote choice for the 2020 US presidential election was measured.) The same applies to citizenship variable. immigrants_df$Q111 (second generation or not)
```{r}
omnibus_df <-
clean_omnibus_df(omnibus_df)
immigrants_df <- clean_immigrant_df(immigrants_df)
```
## Step 2
immigrants_all <- df2comb(immigrants_df, dataset = "immigrants")
omnibus_all <- df2comb(omnibus_df, dataset = "omnibus")
perceptions_all <- df2comb(perceptions_df, dataset = "perceptions")
perceptions_df$ResponseId
---
title: "Three datasets"
author: "Jae Yeon Kim"
date: "`r Sys.Date()`"
---
# Load libs
```{r}
if (!require(pacman)) install.packages("pacman")
pacman::p_load(here, # reproducibility
# wrangling
tidyverse,
tools,
jtools,
# data visualization
hrbrthemes,
viridis,
ggstance,
patchwork,
gridExtra,
ggrepel)
source(here("functions", "utils.R"))
# Get the file names
file_names <- list.files(here("data"))[str_detect(list.files(here("data")), "2021_")]
# Import the csv files; Remove the first two rows
## Immigrants
immigrants_df <- read_csv_custom(1)
## Omnibus
omnibus_df <- read_csv_custom(2)
## Name perceptions
perceptions_df <- read_csv_custom(3)
## Name dataset
names_df <- read.csv(here("data", "names.csv"))
omnibus_df <-
clean_omnibus_df(omnibus_df)
immigrants_df <- clean_immigrant_df(immigrants_df)
immigrants_all <- df2comb(immigrants_df, dataset = "immigrants")
immigrants_df$rid
omnibus_df$rid
perceptions_df <- clean_immigrant_df(perceptions_df)
---
title: "Three datasets"
author: "Jae Yeon Kim"
date: "`r Sys.Date()`"
---
# Load libs
```{r}
if (!require(pacman)) install.packages("pacman")
pacman::p_load(here, # reproducibility
# wrangling
tidyverse,
tools,
jtools,
# data visualization
hrbrthemes,
viridis,
ggstance,
patchwork,
gridExtra,
ggrepel)
source(here("functions", "utils.R"))
```
# Import data
```{r}
# Get the file names
file_names <- list.files(here("data"))[str_detect(list.files(here("data")), "2021_")]
```
```{r}
# Import the csv files; Remove the first two rows
## Immigrants
immigrants_df <- read_csv_custom(1)
## Omnibus
omnibus_df <- read_csv_custom(2)
## Name perceptions
perceptions_df <- read_csv_custom(3)
## Name dataset
names_df <- read.csv(here("data", "names.csv"))
```
omnibus_df <-
clean_omnibus_df(omnibus_df)
immigrants_df <- clean_immigrant_df(immigrants_df)
perceptions_df <- clean_perceptions_df(perceptions_df)
perceptions_df$rid
immigrants_all <- df2comb(immigrants_df, dataset = "immigrants")
omnibus_all <- df2comb(omnibus_df, dataset = "omnibus")
perceptions_all <- df2comb(perceptions_df, dataset = "perceptions")
if (!require(pacman)) install.packages("pacman")
source(here("functions", "utils.R"))
source(here("functions", "utils.R"))
